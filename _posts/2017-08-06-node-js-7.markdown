---
layout: post
title:  node.js 외부 모듈 - ejs 모듈
date:   2017-08-06 14:25:00
author: Aaron Lee
categories: node.js
tags:	node.js book study
cover:  "/assets/node_js_book_01.png"
---

Node.js 는 npm^Node Package Manager^을 기반으로 모듈을 공유한다.
### 외부 모듈 설치 명령어
```
$ npm install 모듈명
```

> NOTE_ ejs 모듈, jade 모듈 (웹 관련 모듈) 설치  
> ```
> $ npm install ejs
> $ npm install jade
> ```

> NOTE_ ejs 모듈, jade 모듈 (웹 관련 모듈) 사용
> ```
> var ejs = require('ejs');
> var jade = require('jade');
> ```

# ejs 모듈
템플릿 엔진 모듈로 ejs 문자열을 HTML 문자열로 변환해 준다.

### *ejs 모듈 메서드*
- render( string[, option] ) :  ejs 문자열을 HTML 문자열로 변경

```
var http = require('http');
var fs = require('fs');
var ejs = require('ejs');

http.createServer(function (request, response) {
    // ejs 파일 읽기
    fs.readFile('EJSPage.ejs', 'utf8', function (error, data) {
        response.writeHead(200, { 'Content-Type': 'text/html' });
        response.end(ejs.render(data));
    });
}).listen(52273, function () {
    console.log('Server Running at http://127.0.0.1:52273');
});
```

### *ejs 파일의 특수 태그*
- <% Code %> : 자바스크립트 코드 입력 태그
- <%= Value %> : 데이터 출력 태그

```
<!-- EJSPage.ejs -->
<% var name = 'Aaron Lee'; %>
<h1><%= name %></h1>
<p><%= 52 * 273 %></p>
<hr/>
<% for(var i = 0; i < 10; i++) { %>
    <h2>The Square of <%= i %> is <%= i * i %></h2>
<% } %>
```

![_config.yml]({{ site.baseurl }}/images/2017-08-06-node-js-7-01.png)

## 데이터 전달
ejs 페이지에 데이터를 전달하는 방법은 render() 메서드의 두번째의 매개변수에 전달하고자 하는 데이저를 입력한다.

```
var http = require('http');
var fs = require('fs');
var ejs = require('ejs');

http.createServer(function (request, response) {
    // ejs 파일 읽기
    fs.readFile('EJSPage.ejs', 'utf8', function (error, data) {
        response.writeHead(200, { 'Content-Type': 'text/html' });
        response.end(ejs.render(data, {
            name : 'Aaron Lee',
            description : 'Hello ejs With Node.js ... !'
        }));
    });
}).listen(52273, function () {
    console.log('Server Running at http://127.0.0.1:52273');
});
```
```
<!-- EJSPage.ejs -->
<h1><%= name %></h1>
<p><%= description %></p>
<hr/>
<% for(var i = 0; i < 10; i++) { %>
    <h2>The Square of <%= i %> is <%= i * i %></h2>
<% } %>
```

![_config.yml]({{ site.baseurl }}/images/2017-08-06-node-js-7-02.png)

> NOTE_ ejs 모듈의 추가 사항은 [ejs 모듈 GigHub 페이지](https://github.com/visionmedia/ejs)를 참고.